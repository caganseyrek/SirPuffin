const calendarElement=document.getElementById("calendar"),calendarTitle=document.getElementById("calendartitle"),weekdayHeaders=document.getElementById("weekdays"),smallCalendarElement=document.getElementById("smallcalendar"),modalBackground=document.getElementById("modalbackground"),modalContainer=document.getElementById("modalcontainer"),modalTitle=document.getElementById("modaltitle"),modalContent=document.getElementById("modalcontent"),weekdaysEnglish=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],weekdaysTurkish=["Pazartesi","Salı","Çarşamba","Perşembe","Cuma","Cumartesi","Pazar"],months=["January","February","March","April","May","June","July","August","September","October","November","December"],holidays=[{title:"Yew Year's Day",date:"1 January"},{title:"National Sovereignity and Children's Day",date:"23 April"},{title:"Labour and Solidarity Day",date:"1 May"},{title:"Commemoration of Atatürk, Youth and Sports Day",date:"19 May"},{title:"Victory Day",date:"30 August"},{title:"Republic Day",date:"29 October"}];var currentMonthCounter=0,currentYearCounter=0,modalState=!1,currentTheme="Light",currentFirstDay="Monday";function renderCalendar(){calendarElement.textContent="",calendarTitle.textContent="",weekdayHeaders.textContent="",smallCalendarElement.textContent="";var e=new Date,t=(0!==currentMonthCounter&&e.setMonth((new Date).getMonth()+currentMonthCounter),0!==currentYearCounter&&((t=(new Date).getFullYear()+currentYearCounter)<1?t=1:9999<t?t=9999:e.setFullYear(t)),e.getMonth()),n=e.getFullYear(),a=e.getDate(),d=(new Date).toLocaleDateString("en-uk",{month:"long"}),r=(new Date).toLocaleDateString("en-uk",{year:"numeric"}),e=new Date(n,t,1),o=new Date(n,t+1,1),l=new Date(n,t,0).getDate(),i=new Date(n,t+1,0).getDate(),t=e.toLocaleDateString("tr-TR",{weekday:"long",year:"numeric",month:"numeric",day:"numeric"});const c=e.toLocaleDateString("en-TR",{month:"long"});var s=o.toLocaleDateString("en-TR",{month:"long"});const m=weekdaysTurkish.indexOf(t.split(" ")[1]);e=document.createElement("b"),e.textContent=c+" ",o=document.createElement("span");o.textContent=n.toString(),calendarTitle.appendChild(e),calendarTitle.appendChild(o),document.title=c+" "+n.toString()+" - SirPuffin";for(let e=0;e<=6;e++){var u=document.createElement("div"),u=(u.textContent=weekdaysEnglish[e].slice(0,3),weekdayHeaders.appendChild(u),document.createElement("div"));u.textContent=weekdaysEnglish[e].charAt(0),u.classList.add("scday"),u.classList.add("header"),smallCalendarElement.appendChild(u)}var p=1,y=1;for(let e=1;e<=6;e++){var h=document.createElement("tr");for(let e=1;e<=7;e++){const E=document.createElement("td");var C=document.createElement("div");const v=document.createElement("div");var g=document.createElement("div");C.classList.add("daylabel"),v.classList.add("dayevent"),g.classList.add("scday"),p<=m?(C.textContent=(l-(m-p)).toString(),E.classList.add("notcurrent"),g.textContent=(l-(m-p)).toString(),g.classList.add("scnotcurrent")):(C.textContent=(p-m).toString(),g.textContent=(p-m).toString(),p-m==1&&(C.textContent=c.slice(0,3)+" "+(p-m)),p===a&&d===c&&n.toString()===r&&(C.classList.add("today"),g.classList.add("today"))),p>i+m&&(C.textContent=y.toString(),1===y&&(C.textContent=s.slice(0,3)+" "+y.toString()),E.classList.add("notcurrent"),g.textContent=y.toString(),g.classList.add("scnotcurrent"),y++),E.appendChild(C),holidays.forEach(e=>{var t=(p-m).toString();e.date.split(" ")[1]===c&&e.date.split(" ")[0]===t&&(v.textContent=e.title,E.appendChild(v))}),h.appendChild(E),smallCalendarElement.appendChild(g),p++}calendarElement.appendChild(h),renderEvents()}}function renderEvents(){}function jumpToDate(){var e,t=document.getElementById("jumpyearinput"),n=document.getElementById("jumpmonthdropdown");modalContainer.querySelectorAll("div.errorprompt").forEach(e=>{modalContainer.removeChild(e)}),""===t.value?((e=document.createElement("div")).classList.add("errorprompt"),e.textContent="Invalid date. Please try again.",modalContainer.append(e)):t.value<1||9999<t.value?((e=document.createElement("div")).classList.add("errorprompt"),e.textContent="The year must be between 1-9999. Please try again.",modalContainer.append(e),t.value<1?t.value=1:9999<t&&(t.value=9999)):(e=(new Date).getMonth(),n=months.indexOf(n.value)+1-(e+1),e=(new Date).getFullYear(),t=t.value-e,currentMonthCounter=n,currentYearCounter=t,renderCalendar(),modalState&&closeModal())}function openModal(e,t=0){var n=document.createElement("h2"),a=document.createElement("div"),d=(a.setAttribute("id","dateselectiongrid"),document.createElement("select"));d.setAttribute("class","dropdown");for(let e=0;e<12;e++){var r=(new Date).getFullYear(),r=new Date(r,e).toLocaleTimeString("en-uk",{month:"long"}),o=document.createElement("option");o.textContent=r.split(" ")[0],d.appendChild(o)}var l,i,c,s,m,u,p,y,h=document.createElement("input"),h=(h.setAttribute("type","number"),h.setAttribute("class","modalinput"),document.createElement("input"));h.setAttribute("type","number"),h.setAttribute("class","modalinput"),"settings"===e&&(n.textContent="Settings",modalTitle.appendChild(n),l=document.createElement("span"),i=document.createElement("span"),l.textContent="Calendar Theme",i.textContent="First Day of the Week",(c=document.createElement("select")).setAttribute("class","dropdown"),c.setAttribute("id","themeselector"),y=document.createElement("option"),p=document.createElement("option"),y.textContent="Dark",p.textContent="Light",(s=document.createElement("select")).setAttribute("class","dropdown"),s.setAttribute("id","firstdayselector"),m=document.createElement("option"),u=document.createElement("option"),m.textContent="Monday",u.textContent="Sunday",c.appendChild(p),c.appendChild(y),s.appendChild(m),s.appendChild(u),p="Light"===localStorage.getItem("theme")?0:1,y="Monday"===localStorage.getItem("firstday")?0:1,c.selectedIndex=p,s.selectedIndex=y,(m=document.createElement("div")).setAttribute("class","settingsrow"),m.appendChild(l),m.appendChild(c),(u=document.createElement("div")).setAttribute("class","settingsrow"),u.appendChild(i),u.appendChild(s),(p=document.createElement("a")).setAttribute("id","settingaction"),p.textContent="Save Settings",p.addEventListener("click",()=>{var e=document.getElementById("themeselector").value,t=document.getElementById("firstdayselector").value;localStorage.setItem("theme",e.toString()),localStorage.setItem("firstday",t.toString()),loadSettings()}),modalContent.appendChild(m),modalContent.appendChild(u),modalContent.appendChild(p)),"jumpToDate"===e&&(n.textContent="Jump to Date",modalTitle.appendChild(n),h.value=(new Date).getFullYear(),(y=document.createElement("a")).setAttribute("id","jumpaction"),y.textContent="Jump!",y.addEventListener("click",()=>{jumpToDate()}),d.setAttribute("id","jumpmonthdropdown"),h.setAttribute("id","jumpyearinput"),a.appendChild(h),a.appendChild(d),a.appendChild(y),modalContent.appendChild(a)),"newEvent"===e&&(n.textContent="Add New Event",modalTitle.appendChild(n)),modalBackground.style.display="flex",modalState=!0}function closeModal(){modalContainer.querySelectorAll("div.errorprompt").forEach(e=>{modalContainer.removeChild(e)}),modalContent.textContent="",modalTitle.textContent="",modalBackground.style.display="none",modalState=!1}function loadSettings(){var e=localStorage.getItem("theme"),t=localStorage.getItem("firstday");null!==e&&null!==t||(localStorage.setItem("theme","Light"),localStorage.setItem("firstday","Monday"),currentTheme="Light",currentFirstDay="Monday"),currentTheme!==e&&(document.body.classList.toggle("darkmode"),currentTheme="Light"===currentTheme?"Dark":"Light",localStorage.setItem("theme",currentTheme)),currentFirstDay!==t&&("Sunday"===weekdaysEnglish[0]||"Pazar"===weekdaysTurkish[0]?(e=weekdaysEnglish.reverse().pop(),t=weekdaysTurkish.reverse().pop(),weekdaysEnglish.reverse().push(e),weekdaysTurkish.reverse().push(t)):(e=weekdaysEnglish.pop(),t=weekdaysTurkish.pop(),weekdaysEnglish.unshift(e),weekdaysTurkish.unshift(t)),currentFirstDay="Monday"===currentFirstDay?"Sunday":"Monday",localStorage.setItem("firstday",currentFirstDay)),renderCalendar()}function initButtons(){document.getElementById("nextbtn").addEventListener("click",()=>{currentMonthCounter++,renderCalendar()}),document.getElementById("prevbtn").addEventListener("click",()=>{currentMonthCounter--,renderCalendar()}),document.getElementById("todaybtn").addEventListener("click",()=>{currentYearCounter=currentMonthCounter=0,renderCalendar()}),document.getElementById("jumpbtn").addEventListener("click",()=>{openModal("jumpToDate")}),document.getElementById("settingsbtn").addEventListener("click",()=>{openModal("settings")}),document.getElementById("closebtn").addEventListener("click",()=>{closeModal()})}function initShortcuts(){document.addEventListener("keydown",e=>{switch(e.key){case"ArrowLeft":currentMonthCounter--,renderCalendar();break;case"ArrowRight":currentMonthCounter++,renderCalendar()}}),document.addEventListener("keyup",e=>{modalState&&"Escape"===e.key&&closeModal()})}window.onload=()=>{loadSettings(),renderCalendar(),initButtons(),initShortcuts()};