const calendarElement=document.getElementById("calendar"),calendarTitle=document.getElementById("calendartitle"),weekdayHeaders=document.getElementById("weekdays"),smallCalendarElement=document.getElementById("smallcalendar"),modalBackground=document.getElementById("modalbackground"),modalContainer=document.getElementById("modalcontainer"),modalTitle=document.getElementById("modaltitle"),modalContent=document.getElementById("modalcontent"),weekdaysEnglish=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],weekdaysTurkish=["Pazartesi","Salı","Çarşamba","Perşembe","Cuma","Cumartesi","Pazar"],months=["January","February","March","April","May","June","July","August","September","October","November","December"],holidays=[{title:"Yew Year's Day",localname:"(Many translations)",celebratedin:"Most of the world",extrainfo:"First day of the new year in Gregorian Calendar",date:"1 January"},{title:"Valentine's Day",localname:"(Many translations)",celebratedin:"Most of the World",extrainfo:"A special day when lovers buy each other gifts and send cards in most of the world.",date:"14 February"},{title:"International Women's Day",localname:"(Many translations)",celebratedin:"Most of the World",extrainfo:"It is a day dedicated to developing women's political and social consciousness and celebrating their economic, political and social achievements.",date:"8 March"},{title:"Çanakkale Victory and Martyrs' Memorial Day",localname:"Çanakkale Zaferi ve Şehitleri Anma Günü",celebratedin:"Turkey",extrainfo:"Commemorating the end of the Çanakkale Naval Battles which ended with the victory of the Ottoman Empire on 18 March 1915 during First World War.",date:"18 March"},{title:"National Sovereignity and Children's Day",localname:"Ulusal Egemenlik ve Çocuk Bayramı",celebratedin:"Turkey",extrainfo:"Commemorating the first opening of the Turkish Grand National Assembly in 1920. This day is dedicated to children by Mustafa Kemal Atatürk.",date:"23 April"},{title:"International Workers' Day",localname:"(Many translations)",celebratedin:"Most of the World",extrainfo:"Celebrated by most of the world to celebrate the labourers and the working classes.",date:"1 May"},{title:"Commemoration of Atatürk, Youth and Sports Day",localname:"Atatürk'ü Anma, Gençlik ve Spor Bayramı",celebratedin:"Turkey",extrainfo:"Commemorating the start of the Turkish National Movement started with Atatürk's landing in Samsun. This day is dedicated to the youth",date:"19 May"},{title:"Maritime and Cabotage Day",localname:"Denizcilik ve Kabotaj Bayramı",celebratedin:"Turkey",extrainfo:"It is the annual celebration related to merchant marine rights of Turkey held on 1 July in Turkey",date:"1 July"},{title:"Victory Day",localname:"Zafer Bayramı",celebratedin:"Turkey",extrainfo:"Commemorating the victory in the final battle at Dumlupınar, which marked the end of the Turkish War of Independence and the triumph of the Turkish National Movement.",date:"30 August"},{title:"Republic Day",localname:"Cumhuriyet Bayramı",celebratedin:"Turkey",extrainfo:"Commemorating the proclamation of the republic in 1923",date:"29 October"}];var currentMonthCounter=0,currentYearCounter=0,modalState=!1,currentTheme="Light",currentFirstDay="Monday";function renderCalendar(){calendarElement.textContent="",calendarTitle.textContent="",weekdayHeaders.textContent="",smallCalendarElement.textContent="";var e=new Date,t=(0!==currentMonthCounter&&e.setMonth((new Date).getMonth()+currentMonthCounter),0!==currentYearCounter&&((t=(new Date).getFullYear()+currentYearCounter)<1?t=1:9999<t?t=9999:e.setFullYear(t)),e.getMonth()),n=e.getFullYear(),a=e.getDate(),o=(new Date).toLocaleDateString("en-uk",{month:"long"}),d=(new Date).toLocaleDateString("en-uk",{year:"numeric"}),e=new Date(n,t,1),r=new Date(n,t+1,1),l=new Date(n,t,0).getDate(),i=new Date(n,t+1,0).getDate(),t=e.toLocaleDateString("tr-TR",{weekday:"long",year:"numeric",month:"numeric",day:"numeric"});const c=e.toLocaleDateString("en-TR",{month:"long"});var s=r.toLocaleDateString("en-TR",{month:"long"});const m=weekdaysTurkish.indexOf(t.split(" ")[1]);e=document.createElement("b"),e.textContent=c+" ",r=document.createElement("span");r.textContent=n.toString(),calendarTitle.appendChild(e),calendarTitle.appendChild(r),document.title=c+" "+n.toString()+" - SirPuffin";for(let e=0;e<=6;e++){var u=document.createElement("div"),u=(u.textContent=weekdaysEnglish[e].slice(0,3),weekdayHeaders.appendChild(u),document.createElement("div"));u.textContent=weekdaysEnglish[e].charAt(0),u.classList.add("scday"),u.classList.add("header"),smallCalendarElement.appendChild(u)}var h=1,p=1;for(let e=1;e<=6;e++){var y=document.createElement("tr");for(let e=1;e<=7;e++){const v=document.createElement("td");var C=document.createElement("div"),g=document.createElement("div"),E=document.createElement("div");C.classList.add("daylabel"),g.classList.add("dayevent"),E.classList.add("scday"),h<=m?(C.textContent=(l-(m-h)).toString(),v.classList.add("notcurrent"),E.textContent=(l-(m-h)).toString(),E.classList.add("scnotcurrent")):(C.textContent=(h-m).toString(),E.textContent=(h-m).toString(),h-m==1&&(C.textContent=c.slice(0,3)+" "+(h-m)),h-m===a&&o===c&&n.toString()===d&&(C.classList.add("today"),E.classList.add("today"))),h>i+m&&(C.textContent=p.toString(),1===p&&(C.textContent=s.slice(0,3)+" "+p.toString()),v.classList.add("notcurrent"),E.textContent=p.toString(),E.classList.add("scnotcurrent"),p++),v.appendChild(C),v.appendChild(g),holidays.forEach(e=>{var t=(h-m).toString();e.date.split(" ")[1]===c&&e.date.split(" ")[0]===t&&((t=document.createElement("div")).setAttribute("class","holidayevent"),t.textContent=e.title,t.addEventListener("click",()=>{openModal("holiday",null,e)}),v.appendChild(t))}),y.appendChild(v),smallCalendarElement.appendChild(E),h++}calendarElement.appendChild(y),renderEvents()}}function renderEvents(){}function jumpToDate(){var e,t=document.getElementById("jumpyearinput"),n=document.getElementById("jumpmonthdropdown");modalContainer.querySelectorAll("div.errorprompt").forEach(e=>{modalContainer.removeChild(e)}),""===t.value?((e=document.createElement("div")).classList.add("errorprompt"),e.textContent="Invalid date. Please try again.",modalContainer.append(e)):t.value<1||9999<t.value?((e=document.createElement("div")).classList.add("errorprompt"),e.textContent="The year must be between 1-9999. Please try again.",modalContainer.append(e),t.value<1?t.value=1:9999<t&&(t.value=9999)):(e=(new Date).getMonth(),n=months.indexOf(n.value)+1-(e+1),e=(new Date).getFullYear(),t=t.value-e,currentMonthCounter=n,currentYearCounter=t,renderCalendar(),modalState&&closeModal())}function openModal(e,t,n){var a=document.createElement("h2"),o=document.createElement("div"),d=(o.setAttribute("id","dateselectiongrid"),document.createElement("select"));d.setAttribute("class","dropdown");for(let e=0;e<12;e++){var r=(new Date).getFullYear(),r=new Date(r,e).toLocaleTimeString("en-uk",{month:"long"}),l=document.createElement("option");l.textContent=r.split(" ")[0],d.appendChild(l)}var i,c,s,m,u,h,p,y,C=document.createElement("input"),C=(C.setAttribute("type","number"),C.setAttribute("class","modalinput"),document.createElement("input"));C.setAttribute("type","number"),C.setAttribute("class","modalinput"),"settings"===e&&(a.textContent="Settings",modalTitle.appendChild(a),y=document.createElement("span"),c=document.createElement("span"),y.textContent="Calendar Theme",c.textContent="First Day of the Week",(p=document.createElement("select")).setAttribute("class","dropdown"),p.setAttribute("id","themeselector"),i=document.createElement("option"),u=document.createElement("option"),i.textContent="Dark",u.textContent="Light",(s=document.createElement("select")).setAttribute("class","dropdown"),s.setAttribute("id","firstdayselector"),m=document.createElement("option"),h=document.createElement("option"),m.textContent="Monday",h.textContent="Sunday",p.appendChild(u),p.appendChild(i),s.appendChild(m),s.appendChild(h),u="Light"===localStorage.getItem("theme")?0:1,i="Monday"===localStorage.getItem("firstday")?0:1,p.selectedIndex=u,s.selectedIndex=i,(m=document.createElement("div")).setAttribute("class","modalrow"),m.appendChild(y),m.appendChild(p),(h=document.createElement("div")).setAttribute("class","modalrow"),h.appendChild(c),h.appendChild(s),(u=document.createElement("a")).setAttribute("id","settingaction"),u.textContent="Save Settings",u.addEventListener("click",()=>{var e=document.getElementById("themeselector").value,t=document.getElementById("firstdayselector").value;localStorage.setItem("theme",e.toString()),localStorage.setItem("firstday",t.toString()),loadSettings()}),modalContent.appendChild(m),modalContent.appendChild(h),modalContent.appendChild(u)),"holiday"===e&&(a.textContent=(i=n).title,modalTitle.appendChild(a),y=document.createElement("div"),p=document.createElement("div"),c=document.createElement("div"),(s=document.createElement("div")).setAttribute("class","holidayinfo"),y.textContent=i.localname,p.textContent=i.date,c.textContent=i.celebratedin,s.textContent=i.extrainfo,m=document.createElement("div"),(h=document.createElement("div")).setAttribute("class","boldtext"),h.textContent="Local Name",m.setAttribute("class","modalrow bordertop"),m.appendChild(h),m.appendChild(y),u=document.createElement("div"),(n=document.createElement("div")).setAttribute("class","boldtext"),n.textContent="Date",u.setAttribute("class","modalrow"),u.appendChild(n),u.appendChild(p),h=document.createElement("div"),(y=document.createElement("div")).setAttribute("class","boldtext"),y.textContent="Celebrated in",h.setAttribute("class","modalrow"),h.appendChild(y),h.appendChild(c),modalContent.appendChild(m),modalContent.appendChild(u),modalContent.appendChild(h),null!==i.extrainfo)&&(n=document.createElement("div"),(p=document.createElement("div")).setAttribute("class","boldtext"),p.textContent="Extra information",n.setAttribute("class","modalrow bordertop"),n.appendChild(p),n.appendChild(s),modalContent.appendChild(n)),"jumpToDate"===e&&(a.textContent="Jump to Date",modalTitle.appendChild(a),C.value=(new Date).getFullYear(),(y=document.createElement("a")).setAttribute("id","jumpaction"),y.textContent="Jump!",y.addEventListener("click",()=>{jumpToDate()}),d.setAttribute("id","jumpmonthdropdown"),C.setAttribute("id","jumpyearinput"),o.appendChild(C),o.appendChild(d),o.appendChild(y),modalContent.appendChild(o)),"newEvent"===e&&(a.textContent="Add New Event",modalTitle.appendChild(a)),modalBackground.style.display="flex",modalState=!0}function closeModal(){modalContainer.querySelectorAll("div.errorprompt").forEach(e=>{modalContainer.removeChild(e)}),modalContent.textContent="",modalTitle.textContent="",modalBackground.style.display="none",modalState=!1}function loadSettings(){var e=localStorage.getItem("theme"),t=localStorage.getItem("firstday");null!==e&&null!==t||(localStorage.setItem("theme","Light"),localStorage.setItem("firstday","Monday")),currentTheme!==e&&(document.body.classList.toggle("darkmode"),currentTheme="Light"===currentTheme?"Dark":"Light",localStorage.setItem("theme",currentTheme)),currentFirstDay!==t&&("Sunday"===weekdaysEnglish[0]||"Pazar"===weekdaysTurkish[0]?(e=weekdaysEnglish.reverse().pop(),t=weekdaysTurkish.reverse().pop(),weekdaysEnglish.reverse().push(e),weekdaysTurkish.reverse().push(t)):(e=weekdaysEnglish.pop(),t=weekdaysTurkish.pop(),weekdaysEnglish.unshift(e),weekdaysTurkish.unshift(t)),currentFirstDay="Monday"===currentFirstDay?"Sunday":"Monday",localStorage.setItem("firstday",currentFirstDay)),renderCalendar()}function initButtons(){document.getElementById("nextbtn").addEventListener("click",()=>{currentMonthCounter++,renderCalendar()}),document.getElementById("prevbtn").addEventListener("click",()=>{currentMonthCounter--,renderCalendar()}),document.getElementById("todaybtn").addEventListener("click",()=>{currentYearCounter=currentMonthCounter=0,renderCalendar()}),document.getElementById("jumpbtn").addEventListener("click",()=>{openModal("jumpToDate")}),document.getElementById("settingsbtn").addEventListener("click",()=>{openModal("settings")}),document.getElementById("closebtn").addEventListener("click",()=>{closeModal()})}function initShortcuts(){document.addEventListener("keydown",e=>{switch(e.key){case"ArrowLeft":currentMonthCounter--,renderCalendar();break;case"ArrowRight":currentMonthCounter++,renderCalendar()}}),document.addEventListener("keyup",e=>{modalState&&"Escape"===e.key&&closeModal()})}window.onload=()=>{loadSettings(),renderCalendar(),initButtons(),initShortcuts()};